name: Upload Artifact

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Upload Artifact
        uses: EdanXmind/test-bot/upload-artifacts@main # 使用 branch 来引用自定义 Action
        with:
          cdp_actions_api_token: ${{ secrets.CDP_ACTIONS_API_TOKEN }}
          cdp_server_api_url: ${{ vars.CDP_SERVER_API_URL }}
          name: "test-action-artifact-1205"
          version: "1.0.0"
          size_kb: 1234
          type: "binary"
          tags: '{"feat_open": true}'
